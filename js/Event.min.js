if(typeof Event=="undefined")var Event={};Event=function(e){e.modifyEventListener=!0,e.modifySelectors=!0,e.add=function(e,n,r,i){return t(e,n,r,i,"add")},e.remove=function(e,n,r,i){return t(e,n,r,i,"remove")},e.stop=function(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.bubble=0},e.prevent=function(e){e.preventDefault&&e.preventDefault(),e.returnValue=!1},e.cancel=function(t){e.stop(t),e.prevent(t)},e.supports=function(e,t){typeof e=="string"&&(t=e,e=window),t="on"+t;if(t in e)return!0;e.setAttribute||(e=document.createElement("div"));if(e.setAttribute&&e.removeAttribute){e.setAttribute(t,"");var n=typeof e[t]=="function";return typeof e[t]!="undefined"&&(e[t]=void 0),e.removeAttribute(t),n}};var t=function(s,f,l,p,d){p=p||{};if(typeof s=="string"&&f==="ready")var v=setInterval(function(){document.querySelector(s)&&(clearInterval(v),l())},p.interval||1e3/60);else{if(typeof s=="string"){s=document.querySelectorAll(s);if(s.length===0)return;if(s.length!==1){for(var m={},y=0,w=s.length;y<w;y++){var E=t(s[y],f,l,p,d);E&&(m[y]=E)}return n(m)}s=s[0]}f.indexOf&&f.indexOf(" ")!==-1&&(f=f.split(" ")),f.indexOf&&f.indexOf(",")!==-1&&(f=f.split(","));if(typeof f!="string"){m={};if(typeof f.length=="number"){y=0;for(w=f.length;y<w;y++)(E=t(s,f[y],l,p,d))&&(m[f[y]]=E)}else for(y in f)(E=typeof f[y]=="function"?t(s,y,f[y],p,d):t(s,y,f[y].listener,f[y],d))&&(m[y]=E);return n(m)}if(typeof l=="function"){m=p.useCapture||!1,E=r(f)+o(s)+"."+o(l)+"."+(m?1:0);if(e.Gesture._gestureHandlers[f]){if(d==="remove"){if(!i[E])return;i[E].remove(),delete i[E]}else if(d==="add"){if(i[E])return i[E];if(p.useCall)var S=l,l=function(e,t){for(var n in t)e[n]=t[n];return S.call(s,e)};p.gesture=f,p.target=s,p.listener=l,i[E]=e.proxy[f](p)}}else if(d==="remove"){if(!i[E])return;s[a](f,l,m),delete i[E]}else if(d==="add"){if(i[E])return i[E];f=r(f),s[u](f,l,m),i[E]={type:f,target:s,listener:l,remove:function(){e.remove(s,f,l,p)}}}return i[E]}}},n=function(e){return{remove:function(){for(var t in e)e[t].remove()},add:function(){for(var t in e)e[t].add()}}};e.pointerType=window.navigator.msPointerEnabled?"mspointer":e.supports("touchstart")?"touch":"mouse";var r=function(){var t=e.pointerType==="mspointer"?{mousedown:"MSPointerDown",mousemove:"MSPointerMove",mouseup:"MSPointerUp"}:{},n=e.pointerType==="touch"?{mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"}:{};return function(e){return t[e]&&(e=t[e]),n[e]&&(e=n[e]),document.addEventListener?e:"on"+e}}(),i={},s=0,o=function(e){return e===window?"#window":e===document?"#document":e?(e.uniqueID||(e.uniqueID="id"+s++),e.uniqueID):console.log("Missing target on listener!")},u=document.addEventListener?"addEventListener":"attachEvent",a=document.removeEventListener?"removeEventListener":"detachEvent";return e.createPointerEvent=function(t,n,r,i){var s=n.gesture,o=n.target,u=t.targetTouches||e.proxy.getCoords(t),a=u[0];n.pointers=i?[]:u,n.pageX=a.pageX,n.pageY=a.pageY,n.x=n.pageX,n.y=n.pageY,n.identifier=r.identifier,r=document.createEvent("Event"),r.initEvent(s,!0,!0),r.originalEvent=t;for(var f in n)r[f]=n[f];o.dispatchEvent(r)},e.modifyEventListener&&function(){var n=function(n){var i=function(i){var s=i+"EventListener",o=n[s];n[s]=function(n,s,u){if(e.Gesture._gestureHandlers[n]){var a=u;typeof u=="object"?a.useCall=!0:a={useCall:!0,useCapture:u},t(this,n,s,a,i),o.call(this,n,s,u)}else o.call(this,r(n),s,u)}};i("add"),i("remove")};navigator.userAgent.match(/Firefox/)?(n(HTMLDivElement.prototype),n(HTMLCanvasElement.prototype)):n(HTMLElement.prototype),n(document),n(window)}(),e.modifySelectors&&function(){var e=NodeList.prototype;e.removeEventListener=function(e,t,n){for(var r=0,i=this.length;r<i;r++)this[r].removeEventListener(e,t,n)},e.addEventListener=function(e,t,n){for(var r=0,i=this.length;r<i;r++)this[r].addEventListener(e,t,n)}}(),e}(Event),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.pointerSetup=function(e,t){var n=e.gesture.indexOf("pointer")===0&&Event.modifyEventListener?"pointer":"mouse";return e.doc=e.target.ownerDocument||e.target,e.minFingers=e.minFingers||e.fingers||1,e.maxFingers=e.maxFingers||e.fingers||Infinity,e.position=e.position||"relative",t=t||{},t.gesture=e.gesture,t.target=e.target,t.listener=e.listener,t.pointerType=Event.pointerType,t.remove=function(){e.onPointerDown&&Event.remove(e.target,n+"down",e.onPointerDown),e.onPointerMove&&Event.remove(e.doc,n+"move",e.onPointerMove),e.onPointerUp&&Event.remove(e.doc,n+"up",e.onPointerUp)},t.enable=function(t){e.onPointerMove&&(!t||t.move)&&Event.add(e.doc,n+"move",e.onPointerMove),e.onPointerUp&&(!t||t.move)&&Event.add(e.doc,n+"up",e.onPointerUp)},t.disable=function(t){e.onPointerMove&&(!t||t.move)&&Event.remove(e.doc,n+"move",e.onPointerMove),e.onPointerUp&&(!t||t.up)&&Event.remove(e.doc,n+"up",e.onPointerUp)},t},e.pointerStart=function(t,n){for(var r=function(e,t){var r=n.bbox,i=s[t]={};switch(n.position){case"absolute":i.offsetX=0,i.offsetY=0;break;case"difference":i.offsetX=e.pageX,i.offsetY=e.pageY;break;case"move":i.offsetX=e.pageX-r.x1,i.offsetY=e.pageY-r.y1;break;default:i.offsetX=r.x1,i.offsetY=r.y1}var o=(e.pageX+r.scrollLeft-i.offsetX)*r.scaleX,r=(e.pageY+r.scrollTop-i.offsetY)*r.scaleY;i.rotation=0,i.scale=1,i.startTime=i.moveTime=(new Date).getTime(),i.move={x:o,y:r},i.start={x:o,y:r},n.fingers++},i=!n.fingers,s=n.tracker,o=t.changedTouches||e.getCoords(t),u=o.length,a=[],f=0;f<u;f++){var l=o[f],h=l.identifier||Infinity;a.push(h);if(n.fingers){if(n.fingers>=n.maxFingers)return n.identifier=a.join(","),i;var p=0,d;for(d in s){if(s[d].up){delete s[d],r(l,h),n.cancel=!0;break}p++}if(s[h])continue}else s=n.tracker={},n.bbox=e.getBoundingBox(n.target),n.fingers=0,n.cancel=!1;r(l,h)}return n.identifier=a.join(","),i},e.pointerEnd=function(e,t,n){for(var r=e.touches||[],i=r.length,s={},o=0;o<i;o++)s[r[o].identifier||Infinity]=!0;for(var u in t.tracker)if(r=t.tracker[u],!s[u]&&!r.up)n&&(e.changedTouches=[{pageX:r.pageX,pageY:r.pageY,identifier:u==="Infinity"?Infinity:u}],n(e,"up")),t.tracker[u].up=!0,t.fingers--;if(t.fingers!==0)return!1;e=[],t.gestureFingers=0;for(var a in t.tracker)t.gestureFingers++,e.push(a);return t.identifier=e.join(","),!0},e.getCoords=function(t){return e.getCoords=typeof t.pageX!="undefined"?function(e){return Array({type:"mouse",x:e.pageX,y:e.pageY,pageX:e.pageX,pageY:e.pageY,identifier:Infinity})}:function(e){return e=e||window.event,Array({type:"mouse",x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop,pageX:e.clientX+document.documentElement.scrollLeft,pageY:e.clientY+document.documentElement.scrollTop,identifier:Infinity})},e.getCoords(t)},e.getCoord=function(t){if("ontouchstart"in window){var n=0,r=0;e.getCoord=function(e){return e=e.changedTouches,e.length?{x:n=e[0].pageX,y:r=e[0].pageY}:{x:n,y:r}}}else e.getCoord=typeof t.pageX!="undefined"&&typeof t.pageY!="undefined"?function(e){return e}:function(e){return e=e||window.event,{x:e.clientX+document.documentElement.scrollLeft,y:e.clientY+document.documentElement.scrollTop}};return e.getCoord(t)},e.getBoundingBox=function(e){if(e===window||e===document)e=document.body;var t={x1:0,y1:0,x2:0,y2:0,scrollLeft:0,scrollTop:0};e===document.body?(t.height=window.innerHeight,t.width=window.innerWidth):(t.height=e.offsetHeight,t.width=e.offsetWidth),t.scaleX=e.width/t.width||1,t.scaleY=e.height/t.height||1;for(var n=e;n!==null;)t.x1+=n.offsetLeft,t.y1+=n.offsetTop,n=n.offsetParent;for(n=e.parentNode;n!==null;){if(n===document.body)break;if(n.scrollTop===void 0)break;t.scrollLeft+=n.scrollLeft,t.scrollTop+=n.scrollTop,n=n.parentNode}return t.x2=t.x1+t.width,t.y2=t.y1+t.height,t},e.metaTracker=function(){var t=navigator.userAgent.toLowerCase(),n=t.indexOf("macintosh")!==-1,r=n&&t.indexOf("khtml")!==-1?{91:!0,93:!0}:n&&t.indexOf("firefox")!==-1?{224:!0}:{17:!0};return function(t){r[t.keyCode]&&(e.metaKey=t.type==="keydown")}}(),e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.click=function(t){t.maxFingers=t.maxFingers||t.fingers||1;var n;t.onPointerDown=function(n){e.pointerStart(n,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(n),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(e){n=e},t.onPointerUp=function(i){if(e.pointerEnd(i,t)&&(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp),!(n.cancelBubble&&++n.bubble>1))){var s=(n.changedTouches||e.getCoords(n))[0],i=t.bbox,o=e.getBoundingBox(t.target),u=(s.pageX+i.scrollLeft-i.x1)*i.scaleX,s=(s.pageY+i.scrollTop-i.y1)*i.scaleY;u>0&&u<i.width&&s>0&&s<i.height&&i.scrollTop===o.scrollTop&&(Event.modifyEventListener?Event.createPointerEvent(n,r,t):t.listener(n,r))}};var r=e.pointerSetup(t);return r.state="click",Event.add(t.target,"mousedown",t.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.click=e.click,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.dbltap=e.dblclick=function(t){t.maxFingers=t.maxFingers||t.fingers||1;var n,r,i,s,o;t.onPointerDown=function(u){var l=u.changedTouches||e.getCoords(u);n&&!r?(o=l[0],r=(new Date).getTime()-n):(s=l[0],n=(new Date).getTime(),r=0,clearTimeout(i),i=setTimeout(function(){n=0},700)),e.pointerStart(u,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove).listener(u),Event.add(t.doc,"mouseup",t.onPointerUp))},t.onPointerMove=function(u){n&&!r&&(o=(u.changedTouches||e.getCoords(u))[0]);var u=t.bbox,l=(o.pageX+u.scrollLeft-u.x1)*u.scaleX,h=(o.pageY+u.scrollTop-u.y1)*u.scaleY;l>0&&l<u.width&&h>0&&h<u.height&&Math.abs(o.pageX-s.pageX)<=25&&Math.abs(o.pageY-s.pageY)<=25||(Event.remove(t.doc,"mousemove",t.onPointerMove),clearTimeout(i),n=r=0)},t.onPointerUp=function(s){e.pointerEnd(s,t)&&(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp)),n&&r&&(r<=700&&!(s.cancelBubble&&++s.bubble>1)&&(u.state=t.gesture,Event.modifyEventListener?Event.createPointerEvent(s,u,t):t.listener(s,u)),clearTimeout(i),n=r=0)};var u=e.pointerSetup(t);return u.state="dblclick",Event.add(t.target,"mousedown",t.onPointerDown),u},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.dbltap=e.dbltap,Event.Gesture._gestureHandlers.dblclick=e.dblclick,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.drag=function(t){t.onPointerDown=function(n){e.pointerStart(n,t)&&(Event.add(t.doc,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp)),t.onPointerMove(n,"down")},t.onPointerMove=function(r,i){for(var s=t.bbox,o=r.changedTouches||e.getCoords(r),u=o.length,f=0;f<u;f++){var l=o[f],h=l.identifier||Infinity,p=t.tracker[h];p&&(p.pageX=l.pageX,p.pageY=l.pageY,n.state=i||"move",n.identifier=h,n.start=p.start,n.fingers=1,n.x=(p.pageX+s.scrollLeft-p.offsetX)*s.scaleX,n.y=(p.pageY+s.scrollTop-p.offsetY)*s.scaleY,Event.modifyEventListener?Event.createPointerEvent(r,n,t):t.listener(r,n))}},t.onPointerUp=function(n){e.pointerEnd(n,t,t.onPointerMove)&&(Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp))};var n=e.pointerSetup(t);return t.event?t.onPointerDown(t.event):Event.add(t.target,"mousedown",t.onPointerDown),n},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.drag=e.drag,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){var t=Math.PI/180;return e.gesture=function(n){n.minFingers=n.minFingers||n.fingers||2,n.maxFingers=n.maxFingers||n.fingers||2,n.onPointerDown=function(t){var i=n.fingers;e.pointerStart(t,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove),Event.add(n.doc,"mouseup",n.onPointerUp));if(n.fingers===n.minFingers&&i!==n.fingers){r.fingers=n.minFingers,r.scale=1,r.rotation=0,r.state="start";var i="",s;for(s in n.tracker)i+=s;r.identifier=parseInt(i),Event.modifyEventListener?Event.createPointerEvent(t,r,n):n.listener(t,r)}},n.onPointerMove=function(i){for(var s=n.bbox,o=n.tracker,u=i.changedTouches||e.getCoords(i),f=u.length,l=0;l<f;l++){var h=u[l],p=h.identifier||Infinity,d=o[p];d&&(d.move.x=(h.pageX+s.scrollLeft-s.x1)*s.scaleX,d.move.y=(h.pageY+s.scrollTop-s.y1)*s.scaleY)}if(!(n.fingers<n.minFingers)){var u=[],v=d=l=s=0,f=0;for(p in o)h=o[p],h.up||(d+=h.move.x,v+=h.move.y,f++);d/=f,v/=f;for(p in o)if(h=o[p],!h.up){f=h.start;if(!f.distance){var m=f.x-d,y=f.y-v;f.distance=Math.sqrt(m*m+y*y),f.angle=Math.atan2(m,y)/t}var m=h.move.x-d,y=h.move.y-v,w=Math.sqrt(m*m+y*y);s+=w/f.distance,m=Math.atan2(m,y)/t,f=(f.angle-m+360)%360-180,h.DEG2=h.DEG1,h.DEG1=f>0?f:-f,typeof h.DEG2!="undefined"&&(f>0?h.rotation+=h.DEG1-h.DEG2:h.rotation-=h.DEG1-h.DEG2,l+=h.rotation),u.push(h.move)}r.touches=u,r.fingers=n.fingers,r.scale=s/n.fingers,r.rotation=l/n.fingers,r.state="change",Event.modifyEventListener?Event.createPointerEvent(i,r,n):n.listener(i,r)}},n.onPointerUp=function(t){var i=n.fingers;e.pointerEnd(t,n)&&(Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp)),i===n.minFingers&&n.fingers<n.minFingers&&(r.fingers=n.fingers,r.state="end",Event.modifyEventListener?Event.createPointerEvent(t,r,n):n.listener(t,r))};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.gesture=e.gesture,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.pointerdown=e.pointermove=e.pointerup=function(t){if(!t.target.isPointerEmitter){var n=!0;t.onPointerDown=function(e){n=!1,r.gesture="pointerdown",Event.modifyEventListener?Event.createPointerEvent(e,r,t):t.listener(e,r)},t.onPointerMove=function(e){r.gesture="pointermove",Event.modifyEventListener?Event.createPointerEvent(e,r,t,n):t.listener(e,r)},t.onPointerUp=function(e){n=!0,r.gesture="pointerup",Event.modifyEventListener?Event.createPointerEvent(e,r,t,!0):t.listener(e,r)};var r=e.pointerSetup(t);return r.gesture="pointerup",Event.add(t.target,"mousedown",t.onPointerDown),Event.add(t.target,"mousemove",t.onPointerMove),Event.add(t.doc,"mouseup",t.onPointerUp),t.target.isPointerEmitter=!0,r}},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.pointerdown=e.pointerdown,Event.Gesture._gestureHandlers.pointermove=e.pointermove,Event.Gesture._gestureHandlers.pointerup=e.pointerup,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.shake=function(e){var t={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",s,!1)}},n=(new Date).getTime(),r={x:0,y:0,z:0},i={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},s=function(s){var o=s.accelerationIncludingGravity;r.x=.8*r.x+(1-.8)*o.x,r.y=.8*r.y+(1-.8)*o.y,r.z=.8*r.z+(1-.8)*o.z,t.accelerationIncludingGravity=r,t.acceleration.x=o.x-r.x,t.acceleration.y=o.y-r.y,t.acceleration.z=o.z-r.z;if(e.gesture==="devicemotion")Event.modifyEventListener?Event.createPointerEvent(s,t,e):e.listener(s,t);else for(var o=(new Date).getTime(),u=0;u<3;u++){var l="xyz"[u],h=t.acceleration[l],l=i[l],p=Math.abs(h);if(!(o-n<1e3)&&p>4)if(h=o*h/p,p=Math.abs(h+l.value),l.value&&p<200){if(l.value=h,l.count++,l.count===3)Event.modifyEventListener?Event.createPointerEvent(s,t,e):e.listener(s,t),n=o,l.value=0,l.count=0}else l.value=h,l.count=1}};if(window.addEventListener)return window.addEventListener("devicemotion",s,!1),t},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.shake=e.shake,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){var t=Math.PI/180;return e.swipe=function(n){n.snap=n.snap||90,n.threshold=n.threshold||1,n.onPointerDown=function(t){e.pointerStart(t,n)&&(Event.add(n.doc,"mousemove",n.onPointerMove).listener(t),Event.add(n.doc,"mouseup",n.onPointerUp))},n.onPointerMove=function(t){for(var t=t.changedTouches||e.getCoords(t),r=t.length,i=0;i<r;i++){var s=t[i],o=n.tracker[s.identifier||Infinity];o&&(o.move.x=s.pageX,o.move.y=s.pageY,o.moveTime=(new Date).getTime())}},n.onPointerUp=function(i){if(e.pointerEnd(i,n)){Event.remove(n.doc,"mousemove",n.onPointerMove),Event.remove(n.doc,"mouseup",n.onPointerUp);var s,o,u,f,l;for(l in n.tracker){var h=n.tracker[l];f=h.move.x-h.start.x;var p=h.move.y-h.start.y;o=Math.sqrt(f*f+p*p),h=h.moveTime-h.startTime,f=Math.atan2(f,p)/t+180,o=h?o/h:0;if(typeof u=="undefined")u=f,s=o;else{if(!(Math.abs(f-u)<=20))return;u=(u+f)/2,s=(s+o)/2}}s>n.threshold&&(r.angle=-(((u/n.snap+.5>>0)*n.snap||360)-360),r.velocity=s,r.fingers=n.gestureFingers,r.state="swipe",Event.modifyEventListener?Event.createPointerEvent(i,r,n):n.listener(i,r))}};var r=e.pointerSetup(n);return Event.add(n.target,"mousedown",n.onPointerDown),r},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.swipe=e.swipe,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.tap=e.longpress=function(t){t.delay=t.delay||500,t.timeout=t.timeout||250;var n,r;t.onPointerDown=function(s){e.pointerStart(s,t)&&(n=(new Date).getTime(),Event.add(t.doc,"mousemove",t.onPointerMove).listener(s),Event.add(t.doc,"mouseup",t.onPointerUp),t.gesture==="longpress"&&(r=setTimeout(function(){if(!(s.cancelBubble&&++s.bubble>1)){var e=0,n;for(n in t.tracker){if(t.tracker[n].end===!0)return;if(t.cancel)return;e++}i.state="start",i.fingers=e,Event.modifyEventListener?Event.createPointerEvent(s,i,t):t.listener(s,i)}},t.delay)))},t.onPointerMove=function(n){for(var r=t.bbox,n=n.changedTouches||e.getCoords(n),i=n.length,s=0;s<i;s++){var o=n[s],u=t.tracker[o.identifier||Infinity];if(u){var f=(o.pageX+r.scrollLeft-r.x1)*r.scaleX,o=(o.pageY+r.scrollTop-r.y1)*r.scaleY;if(!(f>0&&f<r.width&&o>0&&o<r.height&&Math.abs(f-u.start.x)<=25&&Math.abs(o-u.start.y)<=25)){Event.remove(t.doc,"mousemove",t.onPointerMove),t.cancel=!0;break}}}},t.onPointerUp=function(s){e.pointerEnd(s,t)&&(clearTimeout(r),Event.remove(t.doc,"mousemove",t.onPointerMove),Event.remove(t.doc,"mouseup",t.onPointerUp),!(s.cancelBubble&&++s.bubble>1))&&(t.gesture==="longpress"?i.state==="start"&&(i.state="end",Event.modifyEventListener?Event.createPointerEvent(s,i,t):t.listener(s,i)):!t.cancel&&!((new Date).getTime()-n>t.timeout)&&(i.state="tap",i.fingers=t.gestureFingers,Event.modifyEventListener?Event.createPointerEvent(s,i,t):t.listener(s,i)))};var i=e.pointerSetup(t);return Event.add(t.target,"mousedown",t.onPointerDown),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.tap=e.tap,Event.Gesture._gestureHandlers.longpress=e.longpress,e}(Event.proxy),typeof Event=="undefined"&&(Event={}),typeof Event.proxy=="undefined"&&(Event.proxy={}),Event.proxy=function(e){return e.wheel=function(e){var t,n=e.timeout||150,r=0,i={gesture:"wheel",state:"start",wheelDelta:0,target:e.target,listener:e.listener,remove:function(){e.target[u](a,s,!1)}},s=function(s){s=s||window.event,i.state=r++?"change":"start",i.wheelDelta=s.detail?s.detail*-40:s.wheelDelta,Event.modifyEventListener?Event.createPointerEvent(s,i,e):e.listener(s,i),clearTimeout(t),t=setTimeout(function(){r=0,i.state="end",i.wheelDelta=0,Event.modifyEventListener?Event.createPointerEvent(s,i,e):e.listener(s,i)},n)},o=document.addEventListener?"addEventListener":"attachEvent",u=document.removeEventListener?"removeEventListener":"detachEvent",a=Event.supports("mousewheel")?"mousewheel":"DOMMouseScroll";return e.target[o](a,s,!1),i},Event.Gesture=Event.Gesture||{},Event.Gesture._gestureHandlers=Event.Gesture._gestureHandlers||{},Event.Gesture._gestureHandlers.wheel=e.wheel,e}(Event.proxy);